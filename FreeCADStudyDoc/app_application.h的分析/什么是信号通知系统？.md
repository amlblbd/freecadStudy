​          


​            
toolName: search_codebase
​            
status: success
​          
query: FreeCAD signal notification system observer pattern document object notification basic tutorial simple examples for beginners
​          


​            
toolName: view_files
​            
status: success
​          
​            
filePath: e:\freeCAD\codes\FreeCAD\src\Mod\Test\Document.py
​          


​            
toolName: view_files
​            
status: success
​          
​            
filePath: e:\freeCAD\codes\FreeCAD\src\Gui\DocumentObserver.h
​          


​            
toolName: search_codebase
​            
status: success
​          
query: FreeCAD signal notification system observer pattern simple example basic tutorial how to use document observer object observer signal slot
​          


​            
toolName: search_codebase
​            
status: success
​          
query: FreeCAD signal notification system observer pattern document observer object observer Python API addDocumentObserver removeDocumentObserver slot functions complete tutorial
​          
好，我用最通俗的方式来解释FreeCAD的"信号通知系统"。

## 什么是信号通知系统？

想象这样一个场景：

**您家有个大门，但您想知道谁进出。**

传统做法：您得在门口守着，或者每个进出的人都要主动告诉您。

**更好的做法：装个门铃系统！**
- 有人进门 → 门铃自动响
- 您听到铃声 → 知道有人来了
- 您不需要一直盯着门，该干嘛干嘛

**这就是信号通知系统！** 它就是FreeCAD的"门铃系统"。

## 为什么要用信号通知？

想象您写了一个插件，想知道：
- 用户什么时候新建了一个立方体？
- 用户什么时候删除了一个对象？
- 文档什么时候被保存了？

**没有信号系统时：**
- 您得不断检查"有没有新对象？"
- 您得不断检查"有没有对象被删除？"
- 像守大门一样，太累了！

**有信号系统时：**
- FreeCAD会自动"按门铃"告诉您
- 您只需要"听铃声"就行
- 轻松多了！

## 具体是怎么工作的？

### 1. 观察者（Observer）- 您
您写一个类，告诉FreeCAD："我想知道这些事情发生"：

```python
class 我的观察者:
    def slotCreatedObject(self, obj):
        print("有人创建了新对象：", obj.Name)
    
    def slotDeletedObject(self, obj):
        print("有人删除了对象：", obj.Name)
```

### 2. 注册观察者 - 告诉门铃系统您的存在
```python
我的观察器 = 我的观察者()
FreeCAD.addDocumentObserver(我的观察器)  # 相当于说"我想听门铃"
```

### 3. 等待信号 - 听门铃
现在，每当：
- 有人创建对象 → 您的`slotCreatedObject`自动被调用
- 有人删除对象 → 您的`slotDeletedObject`自动被调用

### 4. 取消注册 - 不想听了
```python
FreeCAD.removeDocumentObserver(我的观察器)  # "我不想听门铃了"
```

## 有哪些"门铃"可以听？

根据代码，FreeCAD提供了这些信号：

**文档级别的门铃：**
- `slotCreatedDocument` - 新建文档
- `slotDeletedDocument` - 删除文档  
- `slotActivateDocument` - 激活文档
- `slotStartSaveDocument` - 开始保存
- `slotFinishSaveDocument` - 完成保存

**对象级别的门铃：**
- `slotCreatedObject` - 创建对象
- `slotDeletedObject` - 删除对象
- `slotChangedObject` - 修改对象属性

**事务级别的门铃：**
- `slotOpenTransaction` - 开始事务
- `slotCommitTransaction` - 提交事务
- `slotAbortTransaction` - 中断事务

## 举个完整的例子

```python
import FreeCAD

class 我的门铃监听员:
    def slotCreatedObject(self, obj):
        print(f"🎉 恭喜！有人创建了 {obj.Name}！")
    
    def slotDeletedObject(self, obj):
        print(f"😢 有人删除了 {obj.Name}...")
    
    def slotChangedObject(self, obj, prop):
        print(f"✏️ {obj.Name} 的 {prop} 属性被修改了")

# 安装门铃
监听员 = 我的门铃监听员()
FreeCAD.addDocumentObserver(监听员)

# 现在试试创建、修改、删除对象，看看控制台输出什么！
```

## 为什么叫"解耦核心"？

**耦合** = 代码之间紧密相连，像缠在一起的耳机线
**解耦** = 代码之间松耦合，像无线耳机

信号系统让FreeCAD的核心功能（创建对象、删除对象等）**不需要知道**谁在监听这些事件。

就像门铃系统：
- 门（FreeCAD核心）只需要按门铃
- 不需要知道谁在听、有多少人在听
- 听的人（您的插件）也不需要知道门是怎么工作的

**这就是"解耦核心"的含义！**

这样设计让FreeCAD既稳定又灵活，任何人都可以轻松开发插件，而不会影响到核心功能。
        